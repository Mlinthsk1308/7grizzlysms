(window.webpackJsonp=window.webpackJsonp||[]).push([[265,44,105,142],{1004:function(e,t,r){e.exports={}},1005:function(e,t,r){e.exports={}},1142:function(e,t,r){"use strict";r.r(t);var n={name:"LinkToAccount",props:{accountName:{type:String,default:""}}},o=(r(977),r(4)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-account-link-root"},[r("NuxtLink",{staticClass:"page-account-link",attrs:{to:e.localePath("/accounts")}},[r("span",[e._v(e._s(e.$t("servicesList.linkToAccount.btnMsg",{accountName:e.accountName})))])]),e._v(" "),r("em",{staticClass:"text"},[e._v(e._s(e.$t("servicesList.linkToAccount.text",{accountName:e.accountName})))])],1)}),[],!1,null,"2a07f256",null);t.default=component.exports},1162:function(e,t,r){"use strict";r(1004)},1163:function(e,t,r){"use strict";r(1005)},1365:function(e,t,r){"use strict";r.r(t);var n=r(0);r(5),r(18),r(6),r(85),r(8),r(14);var o,l=r(25),c=r(160),d=(r(59),r(23),(text,e)=>{for(var{search:t,replace:r}=e,n=(text||"").split(t).length,i=0;i<n;i++)text=(text||"").replace(t,r);return text}),v=r(91),m=r(1142),_=r(257),f=r(288),h=(e,t)=>{var{self:r}=e,n=r.$cookies.get("selectedCountryId");if(void 0===n)return null;var o=n;return null==o?null:Number(o)},y=r(178),C=r(951),x={name:"MenuCmsPage",mixins:[l.f,v.a],layout:"custom-layout",head(){if(this.service){var e,t,r,n=this.service,o=(null===(e=this.$i18n)||void 0===e?void 0:e.locale)||"en",l=d(String((null===(t=this.$store.state.appState)||void 0===t||null===(r=t.vars)||void 0===r?void 0:r["".concat(o,"_Страница сервиса_meta description")])||""),{search:"{name}",replace:null==n?void 0:n.name});return{title:(null==n?void 0:n.seo_title)||"Grizzly SMS",meta:[{hid:"metadescription",name:"description",content:(null==n?void 0:n.seo_description)||l||""},{name:"keywords",content:(null==n?void 0:n.seo_keywords)||""},{hid:"og:title",name:"og:title",property:"og:title",content:(null==n?void 0:n.seo_title)||"Grizzly SMS"},{hid:"og:site_name",name:"og:site_name",property:"og:site_name",content:"GrizzlySMS"},{hid:"og:description",name:"og:description",property:"og:description",content:(null==n?void 0:n.seo_description)||l||""},{hid:"apple-mobile-web-app-title",name:"apple-mobile-web-app-title",content:"apple-".concat((null==n?void 0:n.seo_title)||""," ")},{hid:"og:image",name:"og:image",property:"og:image",content:(null==n?void 0:n.icon)||"logo"},{hid:"og:url",name:"og:url",property:"og:url",content:"https://".concat(window.location.host).concat(this.$route.fullPath)}]}}return{}},data:()=>({localeServicesCountry:null,isPageReload:!1,isLoading:!1,currentNumbers:[],countrysList:[],currentCountry:{external_id:"",name:"",icon:""}}),asyncData:e=>Object(n.a)((function*(){var{$api:t,route:r,params:o,redirect:l,localePath:c}=e,d=o.pathMatch,v=yield t.agent.transport.get("service/get-by-slug/".concat(d,"?expand=accountAvailable")).catch((e=>{})),m=(null==v?void 0:v.data)||null;if(m)yield t.agent.transport.get("service/get-prices-count-for-service/".concat(m.external_id)).then((e=>e.data||0)).catch((e=>0));var _,f,h=[];if(null!=m&&m.external_id){var y=yield t.agent.transport.get("country/active-by-service/".concat(null==m?void 0:m.external_id)).then((e=>e.data)).catch((e=>[]));_=y,(f=[..._]).sort(((a,b)=>{var e=((null==a?void 0:a.name)||"").replace(/[^a-zA-ZА-Яа-я0-9]+/g,""),t=((null==b?void 0:b.name)||"").replace(/[^a-zA-ZА-Яа-я0-9]+/g,"");return e<t?-1:e>t?1:0})),h=f}var C=(null==m?void 0:m.favorite_countries)||[];return yield Promise.all(C.map(function(){var e=Object(n.a)((function*(e,r){var n=yield t.agent.transport.get("/service/get-prices/".concat(e.external_id,"?user=guest")).then((e=>{var t;return(null===(t=(e.data||[]).find((e=>e.service_slug===d)))||void 0===t?void 0:t.price)||"-"})).catch((()=>"-"));C[r].price=n}));return function(t,r){return e.apply(this,arguments)}}())),{service:m,countrysList:h,isCountresLoaded:true,favoriteCountries:C}}))(),watch:{"$store.state.services.services":function(){var e,t,r,n=(null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t||null===(r=t.services)||void 0===r?void 0:r.services)||[];(this.localeServicesCountry||[]).length<=0&&n.length>0&&(this.localeServicesCountry=n)}},mounted(){var e=this;return Object(n.a)((function*(){e.$cookies.get("authToken")&&(yield e.getUser());var t=e.$defaultCountrySelection(),r=h({self:e})||t,o=e.countrysList.find((e=>+e.external_id==+r));if(o&&(e.currentCountry=o),!o){var l,c=null===(l=e.countrysList)||void 0===l?void 0:l[0];c&&(e.currentCountry=c,yield e.getPriceFromCurrentCounrty(c))}Object.keys(e.service||{}).length>0&&document.getElementById("scroll-container").scrollTo({top:0,behavior:"instant"}),Object(n.a)((function*(){yield e.getPricesFavoriteCountries()}))()}))()},components:{LinkToAccount:m.default,ServicesList:_.default,Loader:c.default,Breadcrumbs:f.default,LanguagesList:y.default,HelpDisabledRuCountry:C.default},methods:{messageDisabledCard(e){if(null==e||!e.button_status)return this.$t("servicesList.numberTemporarilyUnavailable")},getNumberCount(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||0;return e<=0?this.$t("servicesList.quantityFew"):e},getPriceFromCurrentCounrty(e){var t=this;return Object(n.a)((function*(){var r,n,o,l=null!=t&&null!==(r=t.user)&&void 0!==r&&r.id?null==t||null===(n=t.user)||void 0===n?void 0:n.id:"guest",c=t.$defaultCountrySelection(),d=(null==e?void 0:e.external_id)||(null===(o=t.currentCountry)||void 0===o?void 0:o.external_id);d=+(d=Boolean(null==d)?String(c):String(d));var data=yield t.$api.agent.transport.get("service/get-prices/".concat(d,"?user=").concat(l)).then((e=>e.data)).catch((()=>[]));t.localeServicesCountry=data}))()},onBuyNumber(){var e=arguments,t=this;return Object(n.a)((function*(){var r,n,o,l,c,d,v,m=e.length>0&&void 0!==e[0]?e[0]:null,_=e.length>1&&void 0!==e[1]?e[1]:"",f=t.$cookies.get("payment-test");if(t.isLoggedIn||!f){if(!t.isLoggedIn&&!f)return yield t.$router.push(t.localePath("/registration?goback=1")),null;var h,y,C=yield t.$api.agent.transport.get("sms-users/balance").then((e=>e.data)).catch((()=>0));if(f&&C<+(null===(r=t.getCurrentServiceInfo)||void 0===r?void 0:r[0].price))yield t.$router.push(t.localePath("/profile/pay?service=".concat(null==t||null===(h=t.service)||void 0===h?void 0:h.external_id,"&country=").concat(m||(null==t||null===(y=t.currentCountry)||void 0===y?void 0:y.external_id))));else if(!f&&C<+(null===(n=t.getCurrentServiceInfo)||void 0===n?void 0:n[0].price))yield t.$router.push(t.localePath("/profile/pay"));else{"country"===_?t.yandexGoalCheck("buy_service-country_attempt"):t.yandexGoalCheck("buy_service-main_attempt"),t.yandexSendUserInfo({userId:null==t||null===(o=t.user)||void 0===o?void 0:o.id,userEmail:null==t||null===(l=t.user)||void 0===l?void 0:l.email}),t.isLoading=!0;var x=m||(null==t||null===(c=t.currentCountry)||void 0===c?void 0:c.external_id),L=null==t||null===(d=t.service)||void 0===d?void 0:d.external_id;if(!(yield t.$api.agent.transport.get("sms-users/get-number/".concat(x,"/").concat(L)).catch((e=>{var r,n=JSON.parse(null==e||null===(r=e.request)||void 0===r?void 0:r.response);t.$toast.error(n.message||"Error"),t.isLoading=!1}))))return t.isLoading=!1,null;"/profile"!==t.$route.path&&t.$router.push(t.localePath("/profile")),"country"===_?t.yandexGoalCheck("buy_service-country_success"):t.yandexGoalCheck("buy_service-main_success"),t.yandexSendUserID({userId:null==t||null===(v=t.user)||void 0===v?void 0:v.id}),t.isLoading=!1,t.$store.commit("active-numbers/updateIndex")}}else{var $,w;yield t.$router.push(t.localePath("/profile/pay?service=".concat(null==t||null===($=t.service)||void 0===$?void 0:$.external_id,"&country=").concat(m||(null==t||null===(w=t.currentCountry)||void 0===w?void 0:w.external_id))))}}))()},getPricesFavoriteCountries:(o=Object(n.a)((function*(){var e,t,r,o,l,c,d=this,v=null!=this&&null!==(e=this.user)&&void 0!==e&&e.id?null==this||null===(t=this.user)||void 0===t?void 0:t.id:"guest";if(null!=this&&null!==(r=this.user)&&void 0!==r&&null!==(o=r.dynamicFields)&&void 0!==o&&o.custom_price||(v="guest"),"guest"!==v){var m=[...this.favoriteCountries],_=(null===(l=this.$route)||void 0===l||null===(c=l.params)||void 0===c?void 0:c.pathMatch)||"";yield Promise.all(m.map(function(){var e=Object(n.a)((function*(e,t){var r=yield d.$api.agent.transport.get("/service/get-prices/".concat(e.external_id,"?user=").concat(v)).then((e=>{var t;return(null===(t=(e.data||[]).find((e=>e.service_slug===_)))||void 0===t?void 0:t.price)||"-"})).catch((()=>"-"));m[t].price=r}));return function(t,r){return e.apply(this,arguments)}}())),this.favoriteCountries=m}})),function(){return o.apply(this,arguments)})},computed:{user(){return this.$store.getters["user/user"]||null},isDisable(){var e=this.currentCountry,t=this.service;return Boolean(62==+(null==e?void 0:e.external_id)&&"yi"===t.external_id)},getCurrency(){return this.$store.getters["currency/currentCurrency"]},getBreadcrumbs(){var e;return[{path:"/",title:this.$t("breadcrumbs.homePage")},{path:this.$route.path,title:(null==this||null===(e=this.service)||void 0===e?void 0:e.name)||""}]},getCurrentServiceInfo(){var e,t,r;return[(this.localeServicesCountry||(null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t||null===(r=t.services)||void 0===r?void 0:r.services)||[]).find((e=>e.service_external_id==this.service.external_id))]},path(){return"/"===this.$route.path?"homepage":this.$route.path},isDisableService:function(){return!1},serviceFavoriteCountries:function(){var e;return(null===(e=this.service)||void 0===e?void 0:e.favorite_countries)||[]},versionLanguageService:function(){var e,t,r;return(null===(e=this.$nuxt)||void 0===e||null===(t=e.context)||void 0===t||null===(r=t.env)||void 0===r?void 0:r.versionLanguageService)||"0"},isHiddenLinkToAccount:function(){var e=this.$i18n.locale;return Boolean("ru"===e)}}},L=x,$=(r(1162),r(1163),r(4)),component=Object($.a)(L,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page container"},[e.service?[r("div",[r("div",{staticClass:"overflow-hidden flex flex-col-reverse lg:flex-row space-x-0 lg:space-x-6"},[r("div",{staticClass:"flex-1 flex flex-col overflow-hidden w-full lg:w-2/5"},[r("div",{staticClass:"flex-1 flex flex-col overflow-hidden"},["1"===e.versionLanguageService?[r("LanguagesList")]:e._e(),e._v(" "),"0"===e.versionLanguageService?[r("ServicesList",{staticClass:"flex flex-col flex-1"})]:e._e()],2)]),e._v(" "),r("div",{staticClass:"w-full lg:w-3/5 mb-3 lg:mb-0"},[r("Breadcrumbs",{attrs:{breadcrumbs:e.getBreadcrumbs}}),e._v(" "),e.isCountresLoaded?r("div",[r("div",{staticClass:"p-3 sm:p-7 bg-base-100 rounded-[10px]"},[r("div",{staticClass:"service-title flex items-center space-x-4 mb-5 md:mb-9"},[r("div",{staticClass:"h-12 w-12 min-h-[48px] min-w-[48px] sm:h-14 sm:w-14 sm:min-h-[56px] sm:min-w-[56px]"},[r("img",{staticClass:"w-full h-full rounded-md",attrs:{src:e.service.icon,alt:"icon"}})]),e._v(" "),e.service.name?r("div",{staticClass:"!font-semibold h1"},[e._v(e._s(e.service.name))]):e._e()]),e._v(" "),e.service.accountAvailable&&!e.isHiddenLinkToAccount?r("div",[r("LinkToAccount",{attrs:{"account-name":e.service.name}})],1):e._e(),e._v(" "),e.countrysList&&e.countrysList.length?r("div",[Boolean(e.favoriteCountries.length>0)?r("div",{staticClass:"service-favorite-countries mb-4"},[r("div",{staticClass:"mb-2"},[e._v("\n                    "+e._s(e.$t("servicesList.labelCountryHighPercentDelivery"))+"\n                  ")]),e._v(" "),r("div",{staticClass:"service-favorite-countries__list"},e._l(e.favoriteCountries,(function(t){return r("div",{key:"serviceFavoriteCountry-"+t.id,staticClass:"service-favorite-country-card"},[r("div",{staticClass:"service-favorite-country-card__country"},[Boolean("string"==typeof t.icon)?r("img",{attrs:{src:t.icon,width:"32px",height:"24px"}}):e._e(),e._v(" "),Boolean("number"==typeof t.icon)?r("nuxt-img",{attrs:{src:String(t.icon),width:"32px",height:"24px"}}):e._e(),e._v(" "),r("span",[e._v(e._s(t.name))])],1),e._v(" "),r("div",{staticClass:"service-favorite-country-card__price"},[r("div",[e._v(e._s(e.$t("serviceCard.price")))]),e._v(" "),r("div",{staticClass:"font-semibold text-xl",class:{"--loading":!t.price}},[e._v("\n                          "+e._s(e.$convertCurrency(t.price))+"\n                          "),r("span",[e._v(e._s("rub"===e.getCurrency?"₽":"$"))])])]),e._v(" "),r("div",{staticClass:"service-favorite-country-card__action"},[r("button",{staticClass:"btn btn-primary",attrs:{disabled:e.isLoading||e.messageDisabledCard(t)},on:{click:function(){return e.onBuyNumber(t.external_id,"country")}}},[e._v("\n                          "+e._s(e.isLoading?e.$t("servicesList.buttonWaiting"):e.$t("servicesList.buttonBuy"))+"\n                        ")])]),e._v(" "),e.messageDisabledCard(t)?r("div",{staticClass:"service-favorite-country-disabled language-item__message-disabled"},[e._v("\n                        "+e._s(e.messageDisabledCard(t))+"\n                      ")]):e._e(),e._v(" "),Boolean("0"===String(t.external_id))?[r("HelpDisabledRuCountry")]:e._e()],2)})),0)]):e._e(),e._v(" "),r("div",{staticClass:"mb-2"},[e._v("\n                  "+e._s(e.$t("servicesList.labelSelectOtherCountry"))+"\n                ")]),e._v(" "),r("div",{staticClass:"flex mb-4"},[r("multiselect",{attrs:{"track-by":"name",label:"name",placeholder:e.$t("servicesList.countryInputPlaceholder"),selectLabel:e.$t("servicesList.selectedLable"),selectedLabel:" ",deselectLabel:" ","option-height":104,options:e.countrysList},on:{select:e.getPriceFromCurrentCounrty},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[r("span",{staticClass:"flex items-center space-x-3 bg-secondary text-primary"},[e.currentCountry.icon?r("img",{staticClass:"h-6 w-8",attrs:{src:t.option.icon,alt:"flag"}}):e._e(),e._v(" "),r("span",{staticClass:"tm-select__color"},[e._v(e._s(t.option.name))])])]}},{key:"option",fn:function(t){return[r("span",{staticClass:"flex items-center space-x-3"},[r("img",{staticClass:"h-6 w-8",attrs:{src:t.option.icon,alt:"flag"}}),e._v(" "),r("span",[e._v(e._s(t.option.name))])])]}}],null,!1,129822148),model:{value:e.currentCountry,callback:function(t){e.currentCountry=t},expression:"currentCountry"}})],1),e._v(" "),e._l(e.getCurrentServiceInfo,(function(t,n){return[t?r("div",{key:"servic_current"+n,staticClass:"relative py-4 pl-6 pr-4 bg-secondary rounded-lg items-start sm:items-center flex-col sm:flex-row flex justify-between"},[r("div",{staticClass:"w-full sm:w-auto flex flex-col mb-4 sm:mb-0 pb-4 sm:pb-0 border-b sm:border-none"},[r("div",[e._v(e._s(e.$t("serviceCard.availableNumbers")))]),e._v(" "),r("div",{staticClass:"font-semibold text-xl"},[e._v(e._s(e.getNumberCount(t.count))+"\n                      ")])]),e._v(" "),r("div",{staticClass:"flex flex-col mb-4 sm:mb-0"},[r("div",[e._v(e._s(e.$t("serviceCard.price")))]),e._v(" "),r("div",{staticClass:"font-semibold text-xl"},[e._v("\n                        "+e._s(e.$convertCurrency(t.price))+"\n                        "),r("span",[e._v(e._s("rub"===e.getCurrency?"₽":"$"))])])]),e._v(" "),r("div",{staticClass:"w-full sm:w-auto flex"},[r("button",{staticClass:"w-full sm:w-40 btn btn-primary min-h-8 h-11 hover:opacity-70",attrs:{disabled:e.isLoading||e.isDisableService||e.isDisable||e.messageDisabledCard(t)},on:{click:function(){return e.onBuyNumber()}}},[e._v(e._s(e.isLoading?e.$t("servicesList.buttonWaiting"):e.$t("servicesList.buttonBuy"))+"\n                      ")])]),e._v(" "),e.messageDisabledCard(t)?r("div",{staticClass:"service-favorite-country-disabled language-item__message-disabled"},[e._v("\n                      "+e._s(e.messageDisabledCard(t))+"\n                    ")]):e._e(),e._v(" "),e.isDisableService?r("div",{staticClass:"card-blur"},[e._v(e._s(e.$t("servicesList.numberTemporarilyUnavailable"))+"\n                    ")]):e._e(),e._v(" "),Boolean("0"===String(t.country_external_id))?[r("HelpDisabledRuCountry")]:e._e()],2):e._e()]}))],2):[r("div",{staticClass:"text-center text-2xl text-primary",domProps:{innerHTML:e._s(e.$t("serviceCard.emptyCountryListMessage"))}})]],2),e._v(" "),e.service.cms_page_id||e.service.description?r("div",{staticClass:"p-3 sm:p-7 bg-base-100 rounded-[10px] mt-3"},[r("h1",[e._v(e._s(e.service.seo_h1?e.service.seo_h1:""))]),e._v(" "),e.service.description&&!e.service.cms_page_id?r("div",{staticClass:"mt-6",domProps:{innerHTML:e._s(e.service.description)}}):e._e(),e._v(" "),e.service.cms_page_id?[r("cms-page",{attrs:{"page-id":Number(e.service.cms_page_id),"content-only":""}})]:e._e()],2):e._e()]):[r("Loader")]],2)])])]:[r("CmsPage",{attrs:{"page-name":e.path}})]],2)}),[],!1,null,"db109f58",null);t.default=component.exports;installComponents(component,{CmsPage:r(537).default,CmsPage:r(537).default,Loader:r(160).default})},882:function(e,t,r){e.exports={}},921:function(e,t,r){e.exports={}},922:function(e,t,r){"use strict";r(882)},951:function(e,t,r){"use strict";r.r(t);var n={name:"HelpDisabledRuCountry",props:{bottom:{type:Boolean,default:!1}}},o=(r(922),r(4)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("client-only",[r("div",{staticClass:"disabled-russion__content __tooltip-custom",class:{bottom:e.bottom}},[r("div",{staticClass:"disabled-russion__message"},[e._v("\n        "+e._s(e.$t("footer.messageDisabledRussianNumbers"))+"\n      ")])])])}),[],!1,null,null,null);t.default=component.exports},977:function(e,t,r){"use strict";r(921)}}]);
//# sourceMappingURL=265-c5e8ba1.modern.js.map
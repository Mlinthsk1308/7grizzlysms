(window.webpackJsonp=window.webpackJsonp||[]).push([[238,111],{1045:function(e,r,t){e.exports={}},1153:function(e,r,t){"use strict";t.r(r);var n={name:"LoaderNumbersCard"},o=(t(987),t(4)),component=Object(o.a)(n,(function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"loader-number__root"},[t("div",{staticClass:"loading-indicator text"}),e._v(" "),t("div",{staticClass:"loading-indicator top"}),e._v(" "),t("div",{staticClass:"loading-indicator bottom"})])}],!1,null,null,null);r.default=component.exports},1207:function(e,r,t){"use strict";t(1045)},1396:function(e,r,t){"use strict";t.r(r);var n=t(7),o=t(0),c=(t(84),t(288)),l=t(25),d=t(1359),v=t(1360),m=t(1153),h=t(951),y=t(261);function _(object,e){var r=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),r.push.apply(r,t)}return r}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(r){Object(n.a)(e,r,source[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(source,r))}))}return e}var C={name:"countriesSubPage",asyncData:e=>Object(o.a)((function*(){var r,{route:t,$api:n,$store:o,$cookies:c}=e,l=(null==t||null===(r=t.params)||void 0===r?void 0:r.pathMatch)||"",d=yield n.agent.transport.get("/country/get-by-slug/".concat(l)).then((e=>e.data)).catch((e=>{})),v=[],m=null;if(null!=d&&d.external_id){v=(v=yield n.agent.transport.get("service/get-prices/".concat(null==d?void 0:d.external_id,"?user=guest")).then((e=>e.data||[])).catch((()=>[]))).map((e=>f(f({},e),{},{nameLowerCase:String((null==e?void 0:e.name)||"").toLowerCase()})));var h=c.get("selectedServiceIdExternal")||null;(m=v.find((e=>e.service_external_id===h)))||(m=v[0])}return{currentCountry:d,currentNumbers:v,currentService:m,isLoadPrices:Boolean(v.length<=0)}}))(),head:function(){var e,r,t,head={title:(null===(e=this.currentCountry)||void 0===e?void 0:e.seo_title)||(null===(r=this.currentCountry)||void 0===r?void 0:r.name),meta:[]},n=(null===(t=this.currentCountry)||void 0===t?void 0:t.seo_description)||"";return n&&(head.meta.push({hid:"metadescription",name:"description",content:n}),head.meta.push({name:"og:description",hid:"og:description",property:"og:description",content:n})),head},mixins:[l.f],data:function(){return{currentNumbers:[],currentService:null,isLoading:!1,isLoadPrices:!1}},created(){var e=this;return Object(o.a)((function*(){if(e.currentCountry){e.$cookies.get("authToken")&&(yield e.$store.dispatch("user/getUser")),yield e.getNumberFromCurrentCountry();var r=e.$cookies.get("selectedServiceIdExternal")||null,t=e.currentNumbers.find((e=>e.service_external_id===r));t||(t=e.currentNumbers[0]),e.currentService=t}else e.$nuxt.error({statusCode:404})}))()},components:{Breadcrumbs:c.default,AvailableNumber:v.default,LoaderNumbersCard:m.default,PopularServiceCard:d.default,HelpDisabledRuCountry:h.default,CustomAutocompleteServices:y.default},computed:{breadcrumbs:function(){var e;return[{path:"/",title:this.$t("breadcrumbs.homePage")},{path:"/countries",title:this.$t("countries.countries")},{path:this.$route.path,title:(null===(e=this.currentCountry)||void 0===e?void 0:e.name)||""}]},messageDisabledCard(){var e;if(null===(e=this.currentService)||void 0===e||!e.button_status)return this.$t("servicesList.numberTemporarilyUnavailable")},currentH1:function(){var e,r;return(null===(e=this.currentCountry)||void 0===e?void 0:e.seo_h1)||(null===(r=this.currentCountry)||void 0===r?void 0:r.name)||""},favoriteServices(){var e,r=(null===(e=this.currentCountry)||void 0===e?void 0:e.favorite_services)||[];return this.currentNumbers.filter((e=>r.some((r=>r.external_id===e.service_external_id))))},description(){var e;return(null===(e=this.currentCountry)||void 0===e?void 0:e.description)||""},isUserAuth(){return this.$store.getters["user/isLoggedIn"]},user(){return this.$store.getters["user/user"]||null}},methods:{onBuyNumber(){var e=arguments,r=this;return Object(o.a)((function*(){var t,n,o=e.length>0&&void 0!==e[0]?e[0]:{},{customCountryId:c=null,serviceId:l=""}=o,d=r.$cookies.get("payment-test");if(r.user||!d){if(!r.isUserAuth&&d)return yield r.$router.push(r.localePath("/registration?goback=1")),null;var v,m,h=yield r.$api.agent.transport.get("sms-users/balance").then((e=>e.data)).catch((()=>0));if(d&&h<+r.currentService.price)yield r.$router.push(r.localePath("/profile/pay?service=".concat(l||(null===(v=r.currentService)||void 0===v?void 0:v.service_external_id),"&country=").concat(c||(null==r||null===(m=r.currentCountry)||void 0===m?void 0:m.external_id))));else if(!d&&h<+r.currentService.price)yield r.$router.push(r.localePath("/profile/pay"));else{r.isLoading=!0;var y=c||(null==r||null===(t=r.currentCountry)||void 0===t?void 0:t.external_id),_=l||(null===(n=r.currentService)||void 0===n?void 0:n.service_external_id);if(!(yield r.$api.agent.transport.get("sms-users/get-number/".concat(y,"/").concat(_)).catch((e=>{var t,n=JSON.parse(null==e||null===(t=e.request)||void 0===t?void 0:t.response);r.$toast.error(n.message||"Error"),r.isLoading=!1}))))return r.isLoading=!1,null;"/profile"!==r.$route.path&&(yield r.$router.push(r.localePath("/profile"))),r.isLoading=!1,r.$store.commit("active-numbers/updateIndex")}}else{var f,C;yield r.$router.push(r.localePath("/profile/pay?service=".concat(l||(null===(f=r.currentService)||void 0===f?void 0:f.service_external_id),"&country=").concat(c||(null==r||null===(C=r.currentCountry)||void 0===C?void 0:C.external_id))))}}))()},getNumberFromCurrentCountry(){var e=this;return Object(o.a)((function*(){var r,t,n=null!=e&&null!==(r=e.user)&&void 0!==r&&r.id?null==e||null===(t=e.user)||void 0===t?void 0:t.id:"guest";if("guest"!==n){var o=yield e.$api.agent.transport.get("service/get-prices/".concat(e.currentCountry.external_id,"?user=").concat(n)).then((e=>e.data)).catch((()=>[]));o=o.map((e=>f(f({},e),{},{nameLowerCase:String((null==e?void 0:e.name)||"").toLowerCase()}))),e.currentNumbers=o,e.isLoadPrices=!1}}))()},changeCurrentService:function(e){this.currentService=e}}},S=C,$=(t(1207),t(4)),component=Object($.a)(S,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"country-page"},[t("Breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),e._v(" "),e.currentCountry&&Object.keys(e.currentCountry)&&Object.keys(e.currentCountry).length?t("div",{staticClass:"country-page__body"},[t("div",{staticClass:"title"},[t("div",{staticClass:"flag"},[t("img",{attrs:{src:e.currentCountry.icon,width:"56px",height:"56px",alt:"icon-country-"+e.currentCountry.name}})]),e._v(" "),t("div",{staticClass:"h1"},[e._v(e._s(e.currentCountry.name))])]),e._v(" "),e.favoriteServices&&e.favoriteServices.length?[t("div",{staticClass:"mb-2"},[e._v(e._s(e.$t("countries.popularServices")))]),e._v(" "),t("div",{staticClass:"popular-service-card__wrapper"},e._l(e.favoriteServices,(function(r){return t("PopularServiceCard",{key:r.id,attrs:{"is-loading":e.isLoading,service:r},on:{onBuyNumber:e.onBuyNumber}})})),1)]:e._e(),e._v(" "),e.isLoadPrices?t("div",[t("loader-numbers-card")],1):t("div",[t("div",{staticClass:"mb-2"},[e._v(e._s(e.$t("countries.anotherServices")))]),e._v(" "),t("div",{staticClass:"mb-4"},[t("CustomAutocompleteServices",{attrs:{value:e.currentService,"use-custom-options":!0,"custom-options":e.currentNumbers},on:{change:e.changeCurrentService}})],1),e._v(" "),e._l([e.currentService],(function(r,n){return t("div",{key:"serviceInfo-"+n,staticClass:"relative"},[r?t("AvailableNumber",{staticClass:"country-available__numbers",attrs:{"is-loading":e.isLoading,"service-info":r,"is-not-available":e.messageDisabledCard},on:{onBuyNumber:e.onBuyNumber}}):e._e(),e._v(" "),e.messageDisabledCard?t("div",{staticClass:"service-favorite-country-disabled language-item__message-disabled"},[e._v("\n          "+e._s(e.messageDisabledCard)+"\n        ")]):e._e(),e._v(" "),r&&Boolean("0"===String(r.country_external_id))?[t("HelpDisabledRuCountry")]:e._e()],2)}))],2),e._v(" "),t("div",[t("h1",{staticClass:"h1"},[e._v(e._s(e.currentH1))]),e._v(" "),e.description?t("div",{domProps:{innerHTML:e._s(e.description)}}):e._e()])],2):e._e()],1)}),[],!1,null,null,null);r.default=component.exports},934:function(e,r,t){e.exports={}},987:function(e,r,t){"use strict";t(934)}}]);
//# sourceMappingURL=_-f27c6d1.modern.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[245,113],{1073:function(e,r,t){"use strict";t(998)},1129:function(e,r,t){e.exports={}},1239:function(e,r,t){"use strict";t.r(r);var n={name:"LoaderNumbersCard"},o=(t(1073),t(5)),component=Object(o.a)(n,(function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"loader-number__root"},[t("div",{staticClass:"loading-indicator text"}),e._v(" "),t("div",{staticClass:"loading-indicator top"}),e._v(" "),t("div",{staticClass:"loading-indicator bottom"})])}],!1,null,null,null);r.default=component.exports},1294:function(e,r,t){"use strict";t(1129)},1488:function(e,r,t){"use strict";t.r(r);t(20),t(13),t(25),t(38);var n=t(3),o=t(0),c=(t(11),t(32),t(23),t(70),t(15),t(22),t(45),t(29),t(347)),l=t(51),d=t(1449),v=t(1450),f=t(1239),m=t(1014),h=t(319);function _(object,e){var r=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),r.push.apply(r,t)}return r}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(r){Object(n.a)(e,r,source[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(source,r))}))}return e}var C={name:"countriesSubPage",asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function r(){var t,n,o,c,l,d,v,f,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.route,o=e.$api,e.$store,c=e.$cookies,l=(null==n||null===(t=n.params)||void 0===t?void 0:t.pathMatch)||"",r.next=4,o.agent.transport.get("/country/get-by-slug/".concat(l)).then((function(e){return e.data})).catch((function(e){}));case 4:if(d=r.sent,v=[],f=null,null==d||!d.external_id){r.next=15;break}return r.next=10,o.agent.transport.get("service/get-prices/".concat(null==d?void 0:d.external_id,"?user=guest")).then((function(e){return e.data||[]})).catch((function(){return[]}));case 10:v=(v=r.sent).map((function(e){return y(y({},e),{},{nameLowerCase:String((null==e?void 0:e.name)||"").toLowerCase()})})),m=c.get("selectedServiceIdExternal")||null,(f=v.find((function(e){return e.service_external_id===m})))||(f=v[0]);case 15:return r.abrupt("return",{currentCountry:d,currentNumbers:v,currentService:f,isLoadPrices:Boolean(v.length<=0)});case 16:case"end":return r.stop()}}),r)})))()},head:function(){var e,r,t,head={title:(null===(e=this.currentCountry)||void 0===e?void 0:e.seo_title)||(null===(r=this.currentCountry)||void 0===r?void 0:r.name),meta:[]},n=(null===(t=this.currentCountry)||void 0===t?void 0:t.seo_description)||"";return n&&(head.meta.push({hid:"metadescription",name:"description",content:n}),head.meta.push({name:"og:description",hid:"og:description",property:"og:description",content:n})),head},mixins:[l.f],data:function(){return{currentNumbers:[],currentService:null,isLoading:!1,isLoadPrices:!1}},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.currentCountry){r.next=3;break}return e.$nuxt.error({statusCode:404}),r.abrupt("return");case 3:if(!e.$cookies.get("authToken")){r.next=7;break}return r.next=7,e.$store.dispatch("user/getUser");case 7:return r.next=9,e.getNumberFromCurrentCountry();case 9:t=e.$cookies.get("selectedServiceIdExternal")||null,(n=e.currentNumbers.find((function(e){return e.service_external_id===t})))||(n=e.currentNumbers[0]),e.currentService=n;case 13:case"end":return r.stop()}}),r)})))()},components:{Breadcrumbs:c.default,AvailableNumber:v.default,LoaderNumbersCard:f.default,PopularServiceCard:d.default,HelpDisabledRuCountry:m.default,CustomAutocompleteServices:h.default},computed:{breadcrumbs:function(){var e;return[{path:"/",title:this.$t("breadcrumbs.homePage")},{path:"/countries",title:this.$t("countries.countries")},{path:this.$route.path,title:(null===(e=this.currentCountry)||void 0===e?void 0:e.name)||""}]},messageDisabledCard:function(){var e;if(null===(e=this.currentService)||void 0===e||!e.button_status)return this.$t("servicesList.numberTemporarilyUnavailable")},currentH1:function(){var e,r;return(null===(e=this.currentCountry)||void 0===e?void 0:e.seo_h1)||(null===(r=this.currentCountry)||void 0===r?void 0:r.name)||""},favoriteServices:function(){var e,r=(null===(e=this.currentCountry)||void 0===e?void 0:e.favorite_services)||[];return this.currentNumbers.filter((function(e){return r.some((function(r){return r.external_id===e.service_external_id}))}))},description:function(){var e;return(null===(e=this.currentCountry)||void 0===e?void 0:e.description)||""},isUserAuth:function(){return this.$store.getters["user/isLoggedIn"]},user:function(){return this.$store.getters["user/user"]||null}},methods:{onBuyNumber:function(){var e=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,l,d,v,f,m,h,_,y,C,x,S,$;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=e.length>0&&void 0!==e[0]?e[0]:{},l=c.customCountryId,d=void 0===l?null:l,v=c.serviceId,f=void 0===v?"":v,m=r.$cookies.get("payment-test"),r.user||!m){t.next=7;break}return t.next=6,r.$router.push(r.localePath("/profile/pay?service=".concat(f||(null===(h=r.currentService)||void 0===h?void 0:h.service_external_id),"&country=").concat(d||(null==r||null===(_=r.currentCountry)||void 0===_?void 0:_.external_id))));case 6:return t.abrupt("return");case 7:if(r.isUserAuth||!m){t.next=11;break}return t.next=10,r.$router.push(r.localePath("/registration?goback=1"));case 10:return t.abrupt("return",null);case 11:return t.next=13,r.$api.agent.transport.get("sms-users/balance").then((function(e){return e.data})).catch((function(){return 0}));case 13:if(y=t.sent,!(m&&y<+r.currentService.price)){t.next=18;break}return t.next=17,r.$router.push(r.localePath("/profile/pay?service=".concat(f||(null===(C=r.currentService)||void 0===C?void 0:C.service_external_id),"&country=").concat(d||(null==r||null===(x=r.currentCountry)||void 0===x?void 0:x.external_id))));case 17:return t.abrupt("return");case 18:if(m||!(y<+r.currentService.price)){t.next=22;break}return t.next=21,r.$router.push(r.localePath("/profile/pay"));case 21:return t.abrupt("return");case 22:return r.isLoading=!0,S=d||(null==r||null===(n=r.currentCountry)||void 0===n?void 0:n.external_id),$=f||(null===(o=r.currentService)||void 0===o?void 0:o.service_external_id),t.next=27,r.$api.agent.transport.get("sms-users/get-number/".concat(S,"/").concat($)).catch((function(e){var t,n=JSON.parse(null==e||null===(t=e.request)||void 0===t?void 0:t.response);r.$toast.error(n.message||"Error"),r.isLoading=!1}));case 27:if(t.sent){t.next=31;break}return r.isLoading=!1,t.abrupt("return",null);case 31:if("/profile"===r.$route.path){t.next=34;break}return t.next=34,r.$router.push(r.localePath("/profile"));case 34:r.isLoading=!1,r.$store.commit("active-numbers/updateIndex");case 36:case"end":return t.stop()}}),t)})))()},getNumberFromCurrentCountry:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var t,n,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("guest"!==(o=null!=e&&null!==(t=e.user)&&void 0!==t&&t.id?null==e||null===(n=e.user)||void 0===n?void 0:n.id:"guest")){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,e.$api.agent.transport.get("service/get-prices/".concat(e.currentCountry.external_id,"?user=").concat(o)).then((function(e){return e.data})).catch((function(){return[]}));case 5:c=(c=r.sent).map((function(e){return y(y({},e),{},{nameLowerCase:String((null==e?void 0:e.name)||"").toLowerCase()})})),e.currentNumbers=c,e.isLoadPrices=!1;case 9:case"end":return r.stop()}}),r)})))()},changeCurrentService:function(e){this.currentService=e}}},x=C,S=(t(1294),t(5)),component=Object(S.a)(x,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"country-page"},[t("Breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),e._v(" "),e.currentCountry&&Object.keys(e.currentCountry)&&Object.keys(e.currentCountry).length?t("div",{staticClass:"country-page__body"},[t("div",{staticClass:"title"},[t("div",{staticClass:"flag"},[t("img",{attrs:{src:e.currentCountry.icon,width:"56px",height:"56px",alt:"icon-country-"+e.currentCountry.name}})]),e._v(" "),t("div",{staticClass:"h1"},[e._v(e._s(e.currentCountry.name))])]),e._v(" "),e.favoriteServices&&e.favoriteServices.length?[t("div",{staticClass:"mb-2"},[e._v(e._s(e.$t("countries.popularServices")))]),e._v(" "),t("div",{staticClass:"popular-service-card__wrapper"},e._l(e.favoriteServices,(function(r){return t("PopularServiceCard",{key:r.id,attrs:{"is-loading":e.isLoading,service:r},on:{onBuyNumber:e.onBuyNumber}})})),1)]:e._e(),e._v(" "),e.isLoadPrices?t("div",[t("loader-numbers-card")],1):t("div",[t("div",{staticClass:"mb-2"},[e._v(e._s(e.$t("countries.anotherServices")))]),e._v(" "),t("div",{staticClass:"mb-4"},[t("CustomAutocompleteServices",{attrs:{value:e.currentService,"use-custom-options":!0,"custom-options":e.currentNumbers},on:{change:e.changeCurrentService}})],1),e._v(" "),e._l([e.currentService],(function(r,n){return t("div",{key:"serviceInfo-"+n,staticClass:"relative"},[r?t("AvailableNumber",{staticClass:"country-available__numbers",attrs:{"is-loading":e.isLoading,"service-info":r,"is-not-available":e.messageDisabledCard},on:{onBuyNumber:e.onBuyNumber}}):e._e(),e._v(" "),e.messageDisabledCard?t("div",{staticClass:"service-favorite-country-disabled language-item__message-disabled"},[e._v("\n          "+e._s(e.messageDisabledCard)+"\n        ")]):e._e(),e._v(" "),r&&Boolean("0"===String(r.country_external_id))?[t("HelpDisabledRuCountry")]:e._e()],2)}))],2),e._v(" "),t("div",[t("h1",{staticClass:"h1"},[e._v(e._s(e.currentH1))]),e._v(" "),e.description?t("div",{domProps:{innerHTML:e._s(e.description)}}):e._e()])],2):e._e()],1)}),[],!1,null,null,null);r.default=component.exports},998:function(e,r,t){e.exports={}}}]);
//# sourceMappingURL=_-34dc889.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[272,44,107,144],{1014:function(e,t,n){"use strict";n.r(t);var r={name:"HelpDisabledRuCountry",props:{bottom:{type:Boolean,default:!1}}},o=(n(985),n(5)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("client-only",[n("div",{staticClass:"disabled-russion__content __tooltip-custom",class:{bottom:e.bottom}},[n("div",{staticClass:"disabled-russion__message"},[e._v("\n        "+e._s(e.$t("footer.messageDisabledRussianNumbers"))+"\n      ")])])])}),[],!1,null,null,null);t.default=component.exports},1063:function(e,t,n){"use strict";n(984)},1089:function(e,t,n){e.exports={}},1090:function(e,t,n){e.exports={}},1228:function(e,t,n){"use strict";n.r(t);var r={name:"LinkToAccount",props:{accountName:{type:String,default:""}}},o=(n(1063),n(5)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-account-link-root"},[n("NuxtLink",{staticClass:"page-account-link",attrs:{to:e.localePath("/accounts")}},[n("span",[e._v(e._s(e.$t("servicesList.linkToAccount.btnMsg",{accountName:e.accountName})))])]),e._v(" "),n("em",{staticClass:"text"},[e._v(e._s(e.$t("servicesList.linkToAccount.text",{accountName:e.accountName})))])],1)}),[],!1,null,"2a07f256",null);t.default=component.exports},1248:function(e,t,n){"use strict";n(1089)},1249:function(e,t,n){"use strict";n(1090)},1457:function(e,t,n){"use strict";n.r(t);var r=n(10),o=n(0);n(11),n(23),n(29),n(19),n(33),n(31),n(32),n(70),n(20),n(25),n(127),n(12),n(34);var c,l=n(51),v=n(215),d=(n(94),n(44),function(text,e){for(var t=e.search,n=e.replace,r=(text||"").split(t).length,i=0;i<r;i++)text=(text||"").replace(t,n);return text}),m=n(135),f=n(1228),_=n(315),h=n(347),x=(n(66),function(e,t){var n=e.self.$cookies.get("selectedCountryId");if(void 0===n)return null;var r=n;return null==r?null:Number(r)}),y=n(230),C=n(1014),L={name:"MenuCmsPage",mixins:[l.f,m.a],layout:"custom-layout",head:function(){if(this.service){var e,t,n,r=this.service,o=(null===(e=this.$i18n)||void 0===e?void 0:e.locale)||"en",c=d(String((null===(t=this.$store.state.appState)||void 0===t||null===(n=t.vars)||void 0===n?void 0:n["".concat(o,"_Страница сервиса_meta description")])||""),{search:"{name}",replace:null==r?void 0:r.name}),head={title:(null==r?void 0:r.seo_title)||"Grizzly SMS",meta:[{hid:"metadescription",name:"description",content:(null==r?void 0:r.seo_description)||c||""},{name:"keywords",content:(null==r?void 0:r.seo_keywords)||""},{hid:"og:title",name:"og:title",property:"og:title",content:(null==r?void 0:r.seo_title)||"Grizzly SMS"},{hid:"og:site_name",name:"og:site_name",property:"og:site_name",content:"GrizzlySMS"},{hid:"og:description",name:"og:description",property:"og:description",content:(null==r?void 0:r.seo_description)||c||""},{hid:"apple-mobile-web-app-title",name:"apple-mobile-web-app-title",content:"apple-".concat((null==r?void 0:r.seo_title)||""," ")},{hid:"og:image",name:"og:image",property:"og:image",content:(null==r?void 0:r.icon)||"logo"},{hid:"og:url",name:"og:url",property:"og:url",content:"https://".concat(window.location.host).concat(this.$route.fullPath)}]};return head}return{}},data:function(){return{localeServicesCountry:null,isPageReload:!1,isLoading:!1,currentNumbers:[],countrysList:[],currentCountry:{external_id:"",name:"",icon:""}}},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,c,l,v,d,m,f,_,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$api,e.route,c=e.params,e.redirect,e.localePath,l=!1,v=c.pathMatch,t.next=5,n.agent.transport.get("service/get-by-slug/".concat(v,"?expand=accountAvailable")).catch((function(e){}));case 5:if(d=t.sent,!(m=(null==d?void 0:d.data)||null)){t.next=11;break}return t.next=10,n.agent.transport.get("service/get-prices-count-for-service/".concat(m.external_id)).then((function(e){return e.data||0})).catch((function(e){return 0}));case 10:t.sent;case 11:if(f=[],null==m||!m.external_id){t.next=17;break}return t.next=15,n.agent.transport.get("country/active-by-service/".concat(null==m?void 0:m.external_id)).then((function(e){return e.data})).catch((function(e){return[]}));case 15:_=t.sent,x=_,y=void 0,(y=Object(r.a)(x)).sort((function(a,b){var e=((null==a?void 0:a.name)||"").replace(/[^a-zA-ZА-Яа-я0-9]+/g,""),t=((null==b?void 0:b.name)||"").replace(/[^a-zA-ZА-Яа-я0-9]+/g,"");return e<t?-1:e>t?1:0})),f=y;case 17:return l=!0,h=(null==m?void 0:m.favorite_countries)||[],t.next=21,Promise.all(h.map(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.agent.transport.get("/service/get-prices/".concat(t.external_id,"?user=guest")).then((function(e){var t;return(null===(t=(e.data||[]).find((function(e){return e.service_slug===v})))||void 0===t?void 0:t.price)||"-"})).catch((function(){return"-"}));case 2:o=e.sent,h[r].price=o;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 21:return t.abrupt("return",{service:m,countrysList:f,isCountresLoaded:l,favoriteCountries:h});case 22:case"end":return t.stop()}var x,y}),t)})))()},watch:{"$store.state.services.services":function(){var e,t,n,r=(null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t||null===(n=t.services)||void 0===n?void 0:n.services)||[];(this.localeServicesCountry||[]).length<=0&&r.length>0&&(this.localeServicesCountry=r)}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,c,l,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$cookies.get("authToken")){t.next=4;break}return t.next=4,e.getUser();case 4:if(n=e.$defaultCountrySelection(),r=x({self:e})||n,(c=e.countrysList.find((function(e){return+e.external_id==+r})))&&(e.currentCountry=c),c){t.next=14;break}if(!(v=null===(l=e.countrysList)||void 0===l?void 0:l[0])){t.next=14;break}return e.currentCountry=v,t.next=14,e.getPriceFromCurrentCounrty(v);case 14:Object.keys(e.service||{}).length>0&&document.getElementById("scroll-container").scrollTo({top:0,behavior:"instant"}),Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPricesFavoriteCountries();case 2:case"end":return t.stop()}}),t)})))();case 16:case"end":return t.stop()}}),t)})))()},components:{LinkToAccount:f.default,ServicesList:_.default,Loader:v.default,Breadcrumbs:h.default,LanguagesList:y.default,HelpDisabledRuCountry:C.default},methods:{messageDisabledCard:function(e){if(null==e||!e.button_status)return this.$t("servicesList.numberTemporarilyUnavailable")},getNumberCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e||0;return t<=0?this.$t("servicesList.quantityFew"):t},getPriceFromCurrentCounrty:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,v,d,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=null!=t&&null!==(r=t.user)&&void 0!==r&&r.id?null==t||null===(o=t.user)||void 0===o?void 0:o.id:"guest",v=t.$defaultCountrySelection(),d=(null==e?void 0:e.external_id)||(null===(c=t.currentCountry)||void 0===c?void 0:c.external_id),d=+(d=Boolean(null==d)?String(v):String(d)),n.next=7,t.$api.agent.transport.get("service/get-prices/".concat(d,"?user=").concat(l)).then((function(e){return e.data})).catch((function(){return[]}));case 7:data=n.sent,t.localeServicesCountry=data;case 9:case"end":return n.stop()}}),n)})))()},onBuyNumber:function(){var e=arguments,t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,v,d,m,f,_,h,x,y,C,L,$,w,k;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f=e.length>0&&void 0!==e[0]?e[0]:null,_=e.length>1&&void 0!==e[1]?e[1]:"",h=t.$cookies.get("payment-test"),t.isLoggedIn||!h){n.next=7;break}return n.next=6,t.$router.push(t.localePath("/profile/pay?service=".concat(null==t||null===(x=t.service)||void 0===x?void 0:x.external_id,"&country=").concat(f||(null==t||null===(y=t.currentCountry)||void 0===y?void 0:y.external_id))));case 6:return n.abrupt("return");case 7:if(t.isLoggedIn||h){n.next=11;break}return n.next=10,t.$router.push(t.localePath("/registration?goback=1"));case 10:return n.abrupt("return",null);case 11:return n.next=13,t.$api.agent.transport.get("sms-users/balance").then((function(e){return e.data})).catch((function(){return 0}));case 13:if(C=n.sent,!(h&&C<+(null===(r=t.getCurrentServiceInfo)||void 0===r?void 0:r[0].price))){n.next=18;break}return n.next=17,t.$router.push(t.localePath("/profile/pay?service=".concat(null==t||null===(L=t.service)||void 0===L?void 0:L.external_id,"&country=").concat(f||(null==t||null===($=t.currentCountry)||void 0===$?void 0:$.external_id))));case 17:return n.abrupt("return");case 18:if(h||!(C<+(null===(o=t.getCurrentServiceInfo)||void 0===o?void 0:o[0].price))){n.next=22;break}return n.next=21,t.$router.push(t.localePath("/profile/pay"));case 21:return n.abrupt("return");case 22:return"country"===_?t.yandexGoalCheck("buy_service-country_attempt"):t.yandexGoalCheck("buy_service-main_attempt"),t.yandexSendUserInfo({userId:null==t||null===(c=t.user)||void 0===c?void 0:c.id,userEmail:null==t||null===(l=t.user)||void 0===l?void 0:l.email}),t.isLoading=!0,w=f||(null==t||null===(v=t.currentCountry)||void 0===v?void 0:v.external_id),k=null==t||null===(d=t.service)||void 0===d?void 0:d.external_id,n.next=29,t.$api.agent.transport.get("sms-users/get-number/".concat(w,"/").concat(k)).catch((function(e){var n,r=JSON.parse(null==e||null===(n=e.request)||void 0===n?void 0:n.response);t.$toast.error(r.message||"Error"),t.isLoading=!1}));case 29:if(n.sent){n.next=33;break}return t.isLoading=!1,n.abrupt("return",null);case 33:"/profile"!==t.$route.path&&t.$router.push(t.localePath("/profile")),"country"===_?t.yandexGoalCheck("buy_service-country_success"):t.yandexGoalCheck("buy_service-main_success"),t.yandexSendUserID({userId:null==t||null===(m=t.user)||void 0===m?void 0:m.id}),t.isLoading=!1,t.$store.commit("active-numbers/updateIndex");case 38:case"end":return n.stop()}}),n)})))()},getPricesFavoriteCountries:(c=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,c,l,v,d,m,f,_,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=null!=this&&null!==(t=this.user)&&void 0!==t&&t.id?null==this||null===(n=this.user)||void 0===n?void 0:n.id:"guest",null!=this&&null!==(c=this.user)&&void 0!==c&&null!==(l=c.dynamicFields)&&void 0!==l&&l.custom_price||(m="guest"),"guest"!==m){e.next=4;break}return e.abrupt("return");case 4:return f=Object(r.a)(this.favoriteCountries),_=(null===(v=this.$route)||void 0===v||null===(d=v.params)||void 0===d?void 0:d.pathMatch)||"",e.next=8,Promise.all(f.map(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.$api.agent.transport.get("/service/get-prices/".concat(t.external_id,"?user=").concat(m)).then((function(e){var t;return(null===(t=(e.data||[]).find((function(e){return e.service_slug===_})))||void 0===t?void 0:t.price)||"-"})).catch((function(){return"-"}));case 2:r=e.sent,f[n].price=r;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:this.favoriteCountries=f;case 9:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},computed:{user:function(){return this.$store.getters["user/user"]||null},isDisable:function(){var e=this.currentCountry,t=this.service;return Boolean(62==+(null==e?void 0:e.external_id)&&"yi"===t.external_id)},getCurrency:function(){return this.$store.getters["currency/currentCurrency"]},getBreadcrumbs:function(){var e;return[{path:"/",title:this.$t("breadcrumbs.homePage")},{path:this.$route.path,title:(null==this||null===(e=this.service)||void 0===e?void 0:e.name)||""}]},getCurrentServiceInfo:function(){var e,t,n,r=this;return[(this.localeServicesCountry||(null===(e=this.$store)||void 0===e||null===(t=e.state)||void 0===t||null===(n=t.services)||void 0===n?void 0:n.services)||[]).find((function(e){return e.service_external_id==r.service.external_id}))]},path:function(){return"/"===this.$route.path?"homepage":this.$route.path},isDisableService:function(){return!1},serviceFavoriteCountries:function(){var e;return(null===(e=this.service)||void 0===e?void 0:e.favorite_countries)||[]},versionLanguageService:function(){var e,t,n;return(null===(e=this.$nuxt)||void 0===e||null===(t=e.context)||void 0===t||null===(n=t.env)||void 0===n?void 0:n.versionLanguageService)||"0"},isHiddenLinkToAccount:function(){var e=this.$i18n.locale;return Boolean("ru"===e)}}},$=L,w=(n(1248),n(1249),n(5)),component=Object(w.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page container"},[e.service?[n("div",[n("div",{staticClass:"overflow-hidden flex flex-col-reverse lg:flex-row space-x-0 lg:space-x-6"},[n("div",{staticClass:"flex-1 flex flex-col overflow-hidden w-full lg:w-2/5"},[n("div",{staticClass:"flex-1 flex flex-col overflow-hidden"},["1"===e.versionLanguageService?[n("LanguagesList")]:e._e(),e._v(" "),"0"===e.versionLanguageService?[n("ServicesList",{staticClass:"flex flex-col flex-1"})]:e._e()],2)]),e._v(" "),n("div",{staticClass:"w-full lg:w-3/5 mb-3 lg:mb-0"},[n("Breadcrumbs",{attrs:{breadcrumbs:e.getBreadcrumbs}}),e._v(" "),e.isCountresLoaded?n("div",[n("div",{staticClass:"p-3 sm:p-7 bg-base-100 rounded-[10px]"},[n("div",{staticClass:"service-title flex items-center space-x-4 mb-5 md:mb-9"},[n("div",{staticClass:"h-12 w-12 min-h-[48px] min-w-[48px] sm:h-14 sm:w-14 sm:min-h-[56px] sm:min-w-[56px]"},[n("img",{staticClass:"w-full h-full rounded-md",attrs:{src:e.service.icon,alt:"icon"}})]),e._v(" "),e.service.name?n("div",{staticClass:"!font-semibold h1"},[e._v(e._s(e.service.name))]):e._e()]),e._v(" "),e.service.accountAvailable&&!e.isHiddenLinkToAccount?n("div",[n("LinkToAccount",{attrs:{"account-name":e.service.name}})],1):e._e(),e._v(" "),e.countrysList&&e.countrysList.length?n("div",[Boolean(e.favoriteCountries.length>0)?n("div",{staticClass:"service-favorite-countries mb-4"},[n("div",{staticClass:"mb-2"},[e._v("\n                    "+e._s(e.$t("servicesList.labelCountryHighPercentDelivery"))+"\n                  ")]),e._v(" "),n("div",{staticClass:"service-favorite-countries__list"},e._l(e.favoriteCountries,(function(t){return n("div",{key:"serviceFavoriteCountry-"+t.id,staticClass:"service-favorite-country-card"},[n("div",{staticClass:"service-favorite-country-card__country"},[Boolean("string"==typeof t.icon)?n("img",{attrs:{src:t.icon,width:"32px",height:"24px"}}):e._e(),e._v(" "),Boolean("number"==typeof t.icon)?n("nuxt-img",{attrs:{src:String(t.icon),width:"32px",height:"24px"}}):e._e(),e._v(" "),n("span",[e._v(e._s(t.name))])],1),e._v(" "),n("div",{staticClass:"service-favorite-country-card__price"},[n("div",[e._v(e._s(e.$t("serviceCard.price")))]),e._v(" "),n("div",{staticClass:"font-semibold text-xl",class:{"--loading":!t.price}},[e._v("\n                          "+e._s(e.$convertCurrency(t.price))+"\n                          "),n("span",[e._v(e._s("rub"===e.getCurrency?"₽":"$"))])])]),e._v(" "),n("div",{staticClass:"service-favorite-country-card__action"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.isLoading||e.messageDisabledCard(t)},on:{click:function(){return e.onBuyNumber(t.external_id,"country")}}},[e._v("\n                          "+e._s(e.isLoading?e.$t("servicesList.buttonWaiting"):e.$t("servicesList.buttonBuy"))+"\n                        ")])]),e._v(" "),e.messageDisabledCard(t)?n("div",{staticClass:"service-favorite-country-disabled language-item__message-disabled"},[e._v("\n                        "+e._s(e.messageDisabledCard(t))+"\n                      ")]):e._e(),e._v(" "),Boolean("0"===String(t.external_id))?[n("HelpDisabledRuCountry")]:e._e()],2)})),0)]):e._e(),e._v(" "),n("div",{staticClass:"mb-2"},[e._v("\n                  "+e._s(e.$t("servicesList.labelSelectOtherCountry"))+"\n                ")]),e._v(" "),n("div",{staticClass:"flex mb-4"},[n("multiselect",{attrs:{"track-by":"name",label:"name",placeholder:e.$t("servicesList.countryInputPlaceholder"),selectLabel:e.$t("servicesList.selectedLable"),selectedLabel:" ",deselectLabel:" ","option-height":104,options:e.countrysList},on:{select:e.getPriceFromCurrentCounrty},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[n("span",{staticClass:"flex items-center space-x-3 bg-secondary text-primary"},[e.currentCountry.icon?n("img",{staticClass:"h-6 w-8",attrs:{src:t.option.icon,alt:"flag"}}):e._e(),e._v(" "),n("span",{staticClass:"tm-select__color"},[e._v(e._s(t.option.name))])])]}},{key:"option",fn:function(t){return[n("span",{staticClass:"flex items-center space-x-3"},[n("img",{staticClass:"h-6 w-8",attrs:{src:t.option.icon,alt:"flag"}}),e._v(" "),n("span",[e._v(e._s(t.option.name))])])]}}],null,!1,129822148),model:{value:e.currentCountry,callback:function(t){e.currentCountry=t},expression:"currentCountry"}})],1),e._v(" "),e._l(e.getCurrentServiceInfo,(function(t,r){return[t?n("div",{key:"servic_current"+r,staticClass:"relative py-4 pl-6 pr-4 bg-secondary rounded-lg items-start sm:items-center flex-col sm:flex-row flex justify-between"},[n("div",{staticClass:"w-full sm:w-auto flex flex-col mb-4 sm:mb-0 pb-4 sm:pb-0 border-b sm:border-none"},[n("div",[e._v(e._s(e.$t("serviceCard.availableNumbers")))]),e._v(" "),n("div",{staticClass:"font-semibold text-xl"},[e._v(e._s(e.getNumberCount(t.count))+"\n                      ")])]),e._v(" "),n("div",{staticClass:"flex flex-col mb-4 sm:mb-0"},[n("div",[e._v(e._s(e.$t("serviceCard.price")))]),e._v(" "),n("div",{staticClass:"font-semibold text-xl"},[e._v("\n                        "+e._s(e.$convertCurrency(t.price))+"\n                        "),n("span",[e._v(e._s("rub"===e.getCurrency?"₽":"$"))])])]),e._v(" "),n("div",{staticClass:"w-full sm:w-auto flex"},[n("button",{staticClass:"w-full sm:w-40 btn btn-primary min-h-8 h-11 hover:opacity-70",attrs:{disabled:e.isLoading||e.isDisableService||e.isDisable||e.messageDisabledCard(t)},on:{click:function(){return e.onBuyNumber()}}},[e._v(e._s(e.isLoading?e.$t("servicesList.buttonWaiting"):e.$t("servicesList.buttonBuy"))+"\n                      ")])]),e._v(" "),e.messageDisabledCard(t)?n("div",{staticClass:"service-favorite-country-disabled language-item__message-disabled"},[e._v("\n                      "+e._s(e.messageDisabledCard(t))+"\n                    ")]):e._e(),e._v(" "),e.isDisableService?n("div",{staticClass:"card-blur"},[e._v(e._s(e.$t("servicesList.numberTemporarilyUnavailable"))+"\n                    ")]):e._e(),e._v(" "),Boolean("0"===String(t.country_external_id))?[n("HelpDisabledRuCountry")]:e._e()],2):e._e()]}))],2):[n("div",{staticClass:"text-center text-2xl text-primary",domProps:{innerHTML:e._s(e.$t("serviceCard.emptyCountryListMessage"))}})]],2),e._v(" "),e.service.cms_page_id||e.service.description?n("div",{staticClass:"p-3 sm:p-7 bg-base-100 rounded-[10px] mt-3"},[n("h1",[e._v(e._s(e.service.seo_h1?e.service.seo_h1:""))]),e._v(" "),e.service.description&&!e.service.cms_page_id?n("div",{staticClass:"mt-6",domProps:{innerHTML:e._s(e.service.description)}}):e._e(),e._v(" "),e.service.cms_page_id?[n("cms-page",{attrs:{"page-id":Number(e.service.cms_page_id),"content-only":""}})]:e._e()],2):e._e()]):[n("Loader")]],2)])])]:[n("CmsPage",{attrs:{"page-name":e.path}})]],2)}),[],!1,null,"db109f58",null);t.default=component.exports;installComponents(component,{CmsPage:n(598).default,CmsPage:n(598).default,Loader:n(215).default})},944:function(e,t,n){e.exports={}},984:function(e,t,n){e.exports={}},985:function(e,t,n){"use strict";n(944)}}]);
//# sourceMappingURL=272-94b210a.js.map